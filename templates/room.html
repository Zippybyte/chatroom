{% extends "layout.html" %}

{% block script %}
<script type="text/javascript" charset="utf-8">
    document.addEventListener("DOMContentLoaded", function() {
        if (localStorage.getItem("name") == null) {
            console.log("no name")
        };
        
        var socket = io("http://localhost:5000");

        socket.on("connect", function() {
            console.log("Client connection sent");
        })

        socket.on("server_connect", function(data) {
            console.log(data);
        })

        socket.emit("client_join", {"name": localStorage.getItem("name"), "roomname": document.getElementById("roomname")})

        socket.on("opponent_join", function() {
            // TODO
        })
        
        socket.on("user_message", function() {
            // TODO: implement chatroom functions
        })

        

        socket.on("opponent_disconnect", function() {
            // TODO
        })
    });
</script>
{% endblock %}

{% block title %}
    
{% endblock %}

{% block body %}
    <div class="container-fluid">
        <div class="row">
            <div class="col">
                <button id="leave" class="btn btn-primary"><a href="/">Leave</a></button>
                <button id="change_name" class="btn btn-primary">Change name</button>
                <span>Room name: <span id="roomname">{{ roomname }}</span></span>
            </div>
        </div>
        <div class="row">
            
        </div>
    </div>
{% endblock %}